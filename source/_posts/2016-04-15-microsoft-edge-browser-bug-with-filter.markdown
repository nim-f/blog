---
layout: post
title: "Неожиданный баг свойства filter в браузере Edge"
date: 2016-04-15 09:47:03 +0300
comments: true
categories: [ie, edge, microsoft, css, grayscale]
---

Пишу вам с подергивающимся глазом после полуторачасового брейнсторма в обнимку с виртуальной машиной и гуглом. Поэтому простите за неровный почерк.

Дизайнеры очень любят черно-белые картинки, которые становятся цветными по ховеру, а верстальщики <s>очень не любят дизайнеров</s> любят современные браузены за поддержку ими свойства filter: grayscale(<value>). Но не все так радостно, как хотелось бы. В свежих IE поддержку filter отрубили, поэтому приходится использовать костыли с jquery и svg.

И вот когда, казалось бы, во всех браузерах, от IE6 до Safari, все работает, приходит багрепорт для браузера Edge. Тут-то начинается веселье.
<!-- more -->
Я, вообще-то, думала, что Edge - это то же самое, что IE, только с другим названием, но оказалось, что это совершенно другой браузер со своими багами и глюками.

И вот в этом новом, усовершенствованном доблестными программистами майкрософта, браузере, который должен "более лучше" отображать контент и радовать быстротой javascript'a, по какой-то загадочной причине не работает filter: grayscale(100%), хотя заявлена его поддержка.

Я попробовала всевозможные сочетания фильтров и префиксов к ним, но успеха это не принесло - картинки продолжали быть цветными мне назло. Более того, демо на других сайтах работали, а на моем, с точно такими-же css-свойствами, дословно скопированными - нет!

Логично предположить, что, возможно, что-то не так в общих стилях на моем сайте. Я поотключала все ресеты, библиотеки миксинов и прочее, оставив только очевидный код, который никак не мог повлиять на те картинки, что должны быть черно-белыми. Не сработало.

Тогда я просто стала комментить весь css по кусочкам. Только когда закомментила все стили, прописанный инлайном grayscale заработал! Ну хоть что-то.

Осталось выяснить, что именно мешает применять фильтр, но это уже дело техники и терпения. Я комментировала код по кусочкам, пока не дошла до дива-обертки, к которому применялись такие стили:

``` css
  border-radius(10px)
  box-shadow(1px 1px 55px rgba(0,0,0,0.3))
  max-width 1486px
  margin 0 auto
  position relative
  padding-bottom 25%
  overflow hidden
```

Казалось бы, ничего криминального. Но как только я убрала отсюда border-radius, все заработало! Картиночки черно-белые, как надо. Но мне нужны круглые уголки, как же без них? Неужели придется выбирать или то, или другое?

Добавила еще один див-обертку и вынесла border-radius и box-shadow к нему. Работает! На этом месте можно было бы успокоиться. Но мне стало интересно, почему с одним дивом не работает, а с двумя работает. Оказалось, что проблема не в самом border-radius, а в его сочетании с overflow: hidden;

Чувствуете градус безумия? Если у родительского дива есть border-radius и overflow, то у дочерних элементов не работает filter!

Думается мне, это еще не последний сюрприз, и edge еще затмит дурную славу IE...